<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Job Application - Clev Productions Card Bizness</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { background: #f6faff; font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .payment-container { background:#fff; max-width:720px; margin:48px auto; border-radius:7px;
      box-shadow:0 2px 8px rgba(25,60,110,0.10); padding:24px 4vw 18px 4vw; border:1px solid #e1e5eb; }
    .logo { display:block; max-width:140px; height:auto; margin:0 auto 12px auto; }
    .payment-form label { display:block; margin-top:18px; font-size:1.03em; font-weight:bold; color:#252525; }
    .payment-form label .req { color:#e44637; margin-left:2px; }
    .form-row { display:flex; gap:18px; margin-top:6px; }
    @media (max-width:680px){ .form-row { flex-direction:column; gap:12px; } }
    input, select, textarea { font-size:1em; padding:9px 8px; border-radius:4px; border:1px solid #b2cbe4;
      margin-top:6px; width:100%; outline:none; box-sizing:border-box; transition:border .13s; resize:vertical; }
    input:focus, textarea:focus, select:focus { border-color:#0d75eb; }
    textarea { min-height:110px; }
    .inline-hint { color:#6b778c; font-size:.97em; margin-left:10px; display:inline-block; margin-bottom:2px; }
    .actions { margin-top:26px; text-align:right; margin-bottom:4px; display:flex; justify-content:flex-end;
      flex-wrap:wrap; gap:10px; }
    .actions button { min-width:110px; font-weight:bold; font-size:1.04em; }
    .actions .next { background:#308b39; color:#fff; border:none; border-radius:4px; padding:9px 22px; cursor:pointer; }
    .small-note { color:#6b778c; font-size:.95em; margin-top:6px; }
    h2.app-title { margin:0 0 6px 0; color:#183b6f; text-transform:uppercase; letter-spacing:0.5px; }
    .status { margin-top:12px; font-size:0.98em; color:#183b6f; }
    .error { color:#b02a2a; }
    .success { color:#2f7a2f; }
    button[disabled] { opacity:0.6; cursor:not-allowed; }
  </style>
</head>
<body>
  <div class="payment-container">
    <img class="logo" id="logoImg" src="image1.png" alt="Clev Productions logo">

    <!-- Form is submitted to Web3Forms via client-side fetch (no signature) -->
    <form id="applicationForm" class="payment-form" autocomplete="off" method="POST" action="#">
      <input type="hidden" name="_redirect" id="_redirect" value="https://example.com/thank-you.html" />
      <input type="hidden" name="subject" value="Clev Productions — Application Submission" />

      <h2 class="app-title">OFFICIAL CLEV PRODUCTIONS — CARD BIZNESS APPLICATION</h2>

      <label for="fullname">Full name <span class="req">*</span></label>
      <input id="fullname" name="name" type="text" required autocomplete="name" placeholder="Your full name">

      <div class="form-row">
        <div style="flex:0.8;">
          <label for="age">Real age <span class="req">*</span></label>
          <input id="age" name="age" type="number" required min="1" max="120" placeholder="e.g. 28">
        </div>
        <div style="flex:1;">
          <label for="month">Month available to start <span class="req">*</span></label>
          <select id="month" name="month" required>
            <option value="" disabled selected>Month</option>
            <option value="January">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option>
            <option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option>
            <option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option>
          </select>
        </div>
        <div style="flex:0.8;">
          <label for="year">Year <span class="req">*</span></label>
          <select id="year" name="year" required>
            <option value="" disabled selected>Year</option>
          </select>
        </div>
      </div>

      <label for="why">Why do you want this job? <span class="req">*</span></label>
      <textarea id="why" name="message" required minlength="20" placeholder="Tell us why you want to join Official Clev Productions Card Bizness"></textarea>

      <label for="qualifications">What makes you think you are qualified? <span class="req">*</span></label>
      <textarea id="qualifications" name="qualifications" required minlength="20" placeholder="Describe relevant skills, experience, or achievements"></textarea>

      <label for="contact">Contact (email or phone) <span class="req">*</span></label>
      <input id="contact" name="contact" type="text" required autocomplete="email tel" placeholder="you@example.com or +123456789">

      <div class="small-note">All fields marked with * are required. Provide accurate information for consideration.</div>

      <div class="actions">
        <button id="submitBtn" class="next" type="submit">Submit Application</button>
      </div>

      <div id="status" class="status" aria-live="polite"></div>
    </form>
  </div>

  <script>
    // ---------- CONFIG ----------
    const WEB3FORMS_ACCESS_KEY = '0547da87-1c0e-483e-8ee0-cbb1ba3aaf2b';
    const WEB3FORMS_ENDPOINT = 'https://api.web3forms.com/submit';

    // ---------- helpers ----------
    function showStatus(message, type) {
      const statusEl = document.getElementById('status');
      statusEl.textContent = message;
      statusEl.className = 'status ' + (type === 'error' ? 'error' : (type === 'success' ? 'success' : ''));
    }

    // populate year select
    (function populateYears() {
      const yearSelect = document.getElementById('year');
      const now = new Date();
      const start = now.getFullYear();
      for (let i = 0; i < 8; i++) {
        const y = start + i;
        const opt = document.createElement('option');
        opt.value = String(y);
        opt.textContent = String(y);
        yearSelect.appendChild(opt);
      }
    })();

    // simple input sanitizers
    document.getElementById('fullname').addEventListener('input', function() {
      this.value = this.value.replace(/[^a-zA-Z\s\'\-\.\u00C0-\u017F]/g, '').replace(/\s{2,}/g,' ');
    });
    document.getElementById('age').addEventListener('input', function() {
      this.value = this.value.replace(/\D/g, '').slice(0,3);
    });
    document.getElementById('contact').addEventListener('input', function() {
      this.value = this.value.replace(/[\x00-\x1F\x7F]/g, '');
    });

    // ---------- submission to Web3Forms ----------
    (function(){
      const form = document.getElementById('applicationForm');
      const submitBtn = document.getElementById('submitBtn');

      form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // native HTML5 validation
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        // extra validation
        const errors = [];
        const name = document.getElementById('fullname').value.trim();
        const age = Number(document.getElementById('age').value);
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
        const message = document.getElementById('why').value.trim();
        const qual = document.getElementById('qualifications').value.trim();
        const contact = document.getElementById('contact').value.trim();

        if (!name) errors.push("Please enter your full name.");
        if (!age || age < 1 || age > 120) errors.push("Please enter a valid age.");
        if (!month) errors.push("Please select the month you can start.");
        if (!year) errors.push("Please select the year you can start.");
        if (message.length < 20) errors.push("Please provide a reason for applying (at least 20 characters).");
        if (qual.length < 20) errors.push("Please describe your qualifications (at least 20 characters).");
        if (!contact) errors.push("Please provide a contact email or phone.");

        if (errors.length) {
          showStatus(errors.join(' '), 'error');
          alert(errors.join('\n'));
          return;
        }

        submitBtn.disabled = true;
        showStatus('Preparing submission...', null);

        try {
          const fd = new FormData();
          fd.append('access_key', WEB3FORMS_ACCESS_KEY);
          fd.append('name', name);
          fd.append('age', String(age));
          fd.append('month', month);
          fd.append('year', year);
          fd.append('message', message);
          fd.append('qualifications', qual);
          fd.append('contact', contact);
          fd.append('subject', document.querySelector('input[name="subject"]').value || 'Application Submission');

          const redirectUrl = document.getElementById('_redirect').value;
          if (redirectUrl) fd.append('redirect', redirectUrl);

          showStatus('Submitting to Web3Forms...', null);

          const res = await fetch(WEB3FORMS_ENDPOINT, { method: 'POST', body: fd });

          if (!res.ok) {
            const text = await res.text();
            throw new Error('Network response not OK: ' + res.status + ' / ' + text);
          }

          const json = await res.json();

          if (json.success) {
            showStatus('Application submitted — thank you!', 'success');
            if (redirectUrl) setTimeout(() => { window.location.href = redirectUrl; }, 800);
          } else {
            showStatus('Submission failed: ' + (json.message || 'unknown'), 'error');
            submitBtn.disabled = false;
            console.warn('Web3Forms response:', json);
          }
        } catch (err) {
          console.error('Submit error:', err);
          showStatus('Submission error: ' + (err.message || err), 'error');
          submitBtn.disabled = false;
        }
      });
    })();
  </script>
</body>
</html>
